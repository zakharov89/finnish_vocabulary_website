<div class="flashcards-toolbar"
     style="margin: 6px 0 10px 0; display:flex; gap:8px; flex-wrap:wrap;">

    <button type="button"
            class="flashcard-control-btn hide-btn"
            onclick="showAllOriginals()">
        Show all original words
    </button>

    <button type="button"
            class="flashcard-control-btn show-btn"
            onclick="showAllTranslations()">
        Show all translations
    </button>

</div>

<div class="flashcard-grid">
    {% for w in words if w.translations %}

        {# ---- FRONT: word, with length-based classes ---- #}
        {% set front_len = w.word|length %}
        {% set front_class = "flashcard-text" %}
        {% if front_len > 17 %}
            {% set front_class = front_class + " flashcard-text--very-long" %}
        {% elif front_len > 12 %}
            {% set front_class = front_class + " flashcard-text--long" %}
        {% endif %}

        {# ---- BACK: up to 3 translations, uniform size based on longest ---- #}
        {% set trans_list = w.translations[:3] %}
        {% set lengths = trans_list | map('length') %}
        {% set max_len = lengths | max %}

        {% set back_class = "flashcard-text" %}
        {% if max_len > 17 %}
            {% set back_class = back_class + " flashcard-text--very-long" %}
        {% elif max_len > 12 %}
            {% set back_class = back_class + " flashcard-text--long" %}
        {% endif %}

        <div class="flashcard">
            <div class="front">
                <span class="{{ front_class }}">
                    {{ w.word }}
                </span>
            </div>

            <div class="back">
                {% for t in trans_list %}
                    <div class="translation-line">
                        <span class="translation-badge {{ back_class }}">
                            {{ t }}
                        </span>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endfor %}
</div>

{% if not words %}
<p class="no-words">No words found.</p>
{% endif %}
