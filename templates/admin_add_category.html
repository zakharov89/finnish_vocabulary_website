{% extends "base.html" %}

{% block content %}



<h2>Add New Category</h2>

<div class="admin-add-word-container">
<form method="post">
    <p>
        <label>Category Name:</label><br>
        <input type="text" name="name" class="admin-input" required>
    </p>

    <p>
        <label>Parent category (optional):</label><br>

        <!-- Text box for searching -->
        <input list="category-list" id="parent-category-input" name="parent_name" class="admin-input" placeholder="Type to search categories...">

        <!-- Hidden input for actual ID -->
        <input type="hidden" name="parent_id" id="parent-category-id">

        <!-- Datalist options -->
        <datalist id="category-list">
            {% for cat in categories %}
            <option data-id="{{ cat['id'] }}" value="{{ cat['name'] }}"></option>
            {% endfor %}
        </datalist>
    </p>
   
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const input = document.getElementById('parent-category-input');
        const hiddenId = document.getElementById('parent-category-id');
        const options = document.querySelectorAll('#category-list option');

        // When user types or selects a category
        input.addEventListener('input', function() {
            const value = input.value;
            const match = Array.from(options).find(opt => opt.value === value);
            hiddenId.value = match ? match.dataset.id : '';  // Set ID if valid
        });
    });
    </script>


    <p>
        <button type="submit" class="admin-btn">Create Category</button>
    </p>

    <p>
        <a href="{{ url_for('admin_dashboard') }}" class="admin-btn-small">Back to Dashboard</a>
    </p>
</form>
</div>
{% endblock %}

