{% extends "base.html" %}
{% block content %}

<h1>All collocations (overview)</h1>

<p style="margin-top:1em;">
    <a href="{{ url_for('admin_dashboard') }}" class="admin-btn-small">
        Back to dashboard
    </a>
</p>

<p style="font-size:0.9rem; color:#555;">
    This is an overview. For detailed editing, open
    <strong>“per-word collocations”</strong> using the links in the table.
</p>

<table style="width:100%; border-collapse:collapse; font-size:0.9rem;">
    <thead>
        <tr style="border-bottom:1px solid #ccc;">
            <th style="text-align:left; padding:4px;">Word</th>
            <th style="text-align:left; padding:4px;">Collocation</th>
            <th style="text-align:left; padding:4px;">Freq / PMI</th>
            <th style="text-align:left; padding:4px;">Shown?</th>
            <th style="text-align:left; padding:4px;">Admin</th>
        </tr>
    </thead>
    <tbody>
        {% for c in collocations %}
            <tr style="border-bottom:1px solid #eee;">
                <td style="padding:4px;">
                    <a href="{{ url_for('show_word', word_name=c.main_word) }}" target="_blank">
                        {{ c.main_word }}
                    </a>
                </td>

                <td style="padding:4px;">
                    {% if c.surface_form %}
                        <strong>{{ c.surface_form }}</strong>
                    {% else %}
                        {% if c.direction == 'L' %}
                            <strong>{{ c.other_form }} {{ c.main_word }}</strong>
                        {% else %}
                            <strong>{{ c.main_word }} {{ c.other_form }}</strong>
                        {% endif %}
                    {% endif %}

                    {% if c.other_lemma %}
                        <span style="font-size:0.8rem; color:#666;">
                            (<a href="{{ url_for('show_word', word_name=c.other_lemma) }}"
                                target="_blank">{{ c.other_lemma }}</a>)
                        </span>
                    {% endif %}
                </td>

                <td style="padding:4px; white-space:nowrap;">
                    {{ c.freq or "?" }} /
                    {{ "%.2f"|format(c.pmi or 0) }}
                </td>

                <td style="padding:4px; white-space:nowrap; font-size:0.8rem;">
                    {% if c.show_in_app %}
                        <span style="color:#2e7d32;">Shown</span>
                    {% else %}
                        <span style="color:#999;">Hidden</span>
                    {% endif %}
                    <br>
                    {% if c.show_examples %}
                        <span style="color:#1565c0;">Examples ON</span>
                    {% else %}
                        <span style="color:#999;">Examples OFF</span>
                    {% endif %}
                </td>

                <td style="padding:4px; font-size:0.8rem;">
                    <a href="{{ url_for('admin_word_collocations', word_name=c.main_word) }}">
                        Per-word collocations
                    </a>
                    <br>
                    <a href="{{ url_for('admin_collocation', colloc_id=c.colloc_id) }}">
                        This collocation
                    </a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<p style="margin-top:1em;">
    <a href="{{ url_for('admin_dashboard') }}" class="admin-btn-small">
        Back to dashboard
    </a>
</p>

{% endblock %}
